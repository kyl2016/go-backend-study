# string

## 问题

### 与 string 值相比，strings.Builder 类型的值有哪些优势？
优势有三种：
1. 已存在的内容不可变，但可以拼接更多的内容；
2. 减少了内存分配和内容拷贝的次数；
3. 可将内容重置，可重用值。

string 类型的值是不可变的。
- 剪裁操作可以使用切片表达式，相当于对其底层的**字节**数组做切片；
```
    s := "Go语言"
	println(s[2:5])
	println(s[2:6])
	
	// 输出：
	语
    语�
```
- 拼接操作可以用操作符`+`实现，Go 语言会把所有被拼接的字符串依次拷贝到一个崭新且足够大的连续内存空间中，并把持有相应指针值的 string 值作为结果返回。
    - 拼接操作过多，会对内存分配产生非常大的压力。
- 值类型。虽然内部持有一个指针值。一个 string 值会在底层与它的所有副本共用同一个字节数组。由于这里的字节数组永远不会改变，所以这样做是绝对安全的。

与 string 值相比，Builder 值的优势其实主要体现在字符**串拼**接方面。

```
type Builder struct {
	addr *Builder // of receiver, to detect copies by value
	buf  []byte
}
```
Builder 值中有一个用于承载内容的容器，是 []byte。由于字节切片的底层数组就是一个字节数组，所以它与 string 值存储内容的方式是一样的。


